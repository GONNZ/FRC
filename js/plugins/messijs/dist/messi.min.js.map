{"version":3,"sources":["_main.js","extensions.js"],"names":["Messi","data","options","close","_this","this","jQuery","extend","prototype","position","viewport","messi","template","setContent","title","remove","append","buttons","length","autoclose","on","hide","prepend","titleClass","addClass","width","css","i","btnbox","class","parseInt","cls","btn","href","value","val","click","$","callback","text","label","closeButton","modal","opacity","modalOpacity","document","height","z-index","zIndex","appendTo","body","show","setTimeout","animate","open","center","margin","padding","top","left","unload","content","visible","empty","window","parent","enforceMargin","resize","one","display","removeClass","event","toggle","off","$window","x","max","y","jqueryize","a","b","alert","id","ask","img","src","Image","load","vp","ratio","Math","min","error","console","log","attr","url","params","request","dataType","cache","status","responseText","success","html","ajax"],"mappings":"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","file":"messi.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    // initialize\n    function Messi(data, options) {\n\n        var close;\n        var _this = this;\n        _this.options = jQuery.extend({}, Messi.prototype.options, options || {});\n\n        // Resolve the viewport vs prototype option (prototype overrides viewport)\n        if (this.options.position === Messi.prototype.options.position) {\n            _this.options.position = _this.options.viewport;\n        }\n\n        // Prepare the item\n        _this.messi = jQuery(_this.template);\n        _this.setContent(data);\n\n        // Adjust the title\n        if (_this.options.title === null) {\n\n            jQuery('.messi-titlebox', _this.messi)\n                .remove();\n\n        } else {\n\n            jQuery('.messi-title', _this.messi)\n                .append(_this.options.title);\n\n            if (_this.options.buttons.length === 0 && !_this.options.autoclose) {\n\n                // Close button required\n                close = jQuery('<span class=\"messi-closebtn\"></span>');\n                close.on('click.MessiJS', function () {\n                    _this.hide();\n                });\n\n                jQuery('.messi-titlebox', this.messi)\n                    .prepend(close);\n\n            }\n\n            if (_this.options.titleClass !== null) {\n                jQuery('.messi-titlebox', this.messi)\n                    .addClass(_this.options.titleClass);\n            }\n\n        }\n\n        // Adjust the width\n        if (_this.options.width !== null) {\n            jQuery('.messi-box', _this.messi)\n                .css('width', _this.options.width);\n        }\n\n        // Prepare the buttons\n        if (_this.options.buttons.length > 0) {\n\n            for (var i = 0; i < _this.options.buttons.length; i++) {\n                var btnbox = jQuery('<div>', {'class':'messi-btnbox'})\n                    .css('width', parseInt(100/_this.options.buttons.length, 10) + '%');\n                var cls = (_this.options.buttons[i]['class']) ? _this.options.buttons[i]['class'] : '';\n                var btn = jQuery('<button>', {\n                    href: '#',\n                    'class': 'btn ' + cls,\n                    value: _this.options.buttons[i].val,\n                    'click': function () {\n                        var value = $(this).val();\n\n                        if (typeof _this.options.callback === 'function') {\n                            if (_this.options.callback(value) === false) {\n                                return this;\n                            }\n                        }\n\n                        _this.hide();\n                    }\n                }).text(_this.options.buttons[i].label);\n\n                btnbox.append(btn);\n                jQuery('.messi-actions', this.messi).append(btnbox);\n\n            }\n\n        } else {\n\n            jQuery('.messi-footbox', this.messi)\n                .remove();\n\n        }\n\n        // Prepare the close button automatically\n        if (_this.options.buttons.length === 0 && _this.options.title === null && !_this.options.autoclose) {\n\n            if (_this.options.closeButton) {\n                close = jQuery('<span class=\"messi-closebtn\"></span>');\n                close.on('click.MessiJS', function () {\n                    _this.hide();\n                });\n\n                jQuery('.messi-content', this.messi)\n                    .prepend(close);\n\n            }\n\n        }\n\n        // Activate the modal screen\n        if (_this.options.modal) {\n            _this.modal = jQuery('<div class=\"messi-modal\"></div>')\n                .css({\n                    opacity: _this.options.modalOpacity,\n                    width: jQuery(document).width(),\n                    height: jQuery(document).height(),\n                    position: 'fixed',\n                    'z-index': _this.options.zIndex + jQuery('.messi').length\n                })\n                .appendTo(document.body);\n        }\n\n        // Show the message\n        if (_this.options.show) { _this.show(); }\n\n        // Configure the automatic closing\n        if (_this.options.autoclose !== null) {\n            setTimeout(function () {\n                var value = jQuery.data(this, 'value');\n                var after = (_this.options.callback !== null) ? function () {\n                        _this.options.callback(value);\n                    } : null;\n                _this.hide();\n            }, _this.options.autoclose, this);\n        }\n\n        return _this;\n\n    }\n\n    Messi.prototype = {\n\n        options: {\n            animate: { open: 'bounceIn', close: 'bounceOut' },  // default animation (disable by setting animate: false)\n            autoclose: null,                                    // autoclose message after 'x' miliseconds, i.e: 5000\n            buttons: [],                                        // array of buttons, i.e: [{id: 'ok', label: 'OK', val: 'OK'}]\n            callback: null,                                     // callback function after close message\n            center: true,                                       // center message on screen\n            closeButton: true,                                  // show close button in header title (or content if buttons array is empty).\n            height: 'auto',                                     // content height\n            title: null,                                        // message title\n            titleClass: null,                                   // title style: info, warning, success, error\n            margin: 0,                                          // enforce a minimal viewport margin the dialog cannot move outside, set to zero to disable\n            modal: false,                                       // shows message in modal (loads background)\n            modalOpacity: 0.2,                                  // modal background opacity\n            padding: '10px',                                    // content padding\n            position: { top: '0px', left: '0px' },              // if center: false, sets X and Y position\n            show: true,                                         // show message after load\n            unload: true,                                       // unload message after hide\n            viewport: { top: '0px', left: '0px' },              // deprecated, see position\n            width: '500px',                                     // message width\n            zIndex: 99999                                       // first dialog z-index\n        },\n        template: '<div class=\"messi\"><div class=\"messi-box\"><div class=\"messi-wrapper\"><div class=\"messi-titlebox\"><span class=\"messi-title\"></span></div><div class=\"messi-content\"></div><div class=\"messi-footbox\"><div class=\"messi-actions\"></div></div></div></div></div>',\n        content: '<div></div>',\n        visible: false,\n\n        setContent: function (data) {\n            jQuery('.messi-content', this.messi)\n                .css({\n                    padding: this.options.padding,\n                    height: this.options.height\n                })\n                .empty()\n                .append(data);\n        },\n\n        center: function () {\n            this.messi.css({\n                top: ((jQuery(window).height() - this.messi.height()) / 2),\n                left: ((jQuery(window).width() - this.messi.width()) / 2)\n            });\n\n            return this;\n        },\n\n        show: function () {\n\n            if (this.visible) { return; }\n\n            if (this.messi.parent().length === 0) {\n                // or unload in case of first call\n                if (this.modal) {\n                    this.modal.appendTo(document.body);\n                }\n                this.messi.appendTo(document.body);\n            }\n\n            if (this.modal) {\n                this.modal.show();\n            }\n\n            // positioning\n            this.messi.css({\n                top: this.options.position.top,\n                left: this.options.position.left\n            });\n\n            this.messi.css({\n                'zIndex': this.options.zIndex + jQuery('.messi').length\n            });\n\n            // animation\n            if (this.options.animate) {\n                this.messi.addClass('animated '+this.options.animate.open);\n            }\n\n            this.messi.show();\n\n            // Get the center of the screen if the center option is on\n            if (this.options.center) {\n                this.center();\n            } else {\n                this.enforceMargin();\n            }\n\n            // Cancel the scroll\n            //document.documentElement.style.overflow = \"hidden\";\n\n            this.visible = true;\n\n            // Control the resizing of the display\n            jQuery(window).on('resize.MessiJS scroll.MessiJS', this, Messi.prototype.resize);\n        },\n\n        hide: function () {\n\n            if (!this.visible) { return; }\n            var _this = this;\n\n            if (this.options.animate) {\n                this.messi.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n                    _this.visible = false;\n\n                    if (_this.options.modal) {\n                        _this.modal.css({ display: 'none' });\n                    }\n\n                    // FIXME disabling option `unload: false`, needs to be re-enabled\n                    // if (_this.options.unload) {\n                        _this.unload();\n                    // }\n                });\n\n                this.messi.removeClass(this.options.animate.open).addClass(this.options.animate.close);\n            } else {\n                if (_this.options.modal) {\n                    _this.modal.css({ display: 'none' });\n                }\n\n                _this.messi.css({ display: 'none' });\n\n                // Reactivate the scroll\n                //document.documentElement.style.overflow = \"visible\";\n\n                _this.visible = false;\n\n                // FIXME disabling option `unload: false`, needs to be re-enabled\n                // if (_this.options.unload) {\n                    _this.unload();\n                // }\n            }\n\n            return this;\n\n        },\n\n        resize: function (event) {\n            var _this = event.data;\n            if (_this.options.modal) {\n                jQuery('.messi-modal')\n                    .css({\n                        width: jQuery(document).width(),\n                        height: jQuery(document).height()\n                    });\n            }\n\n            if (_this.options.center) {\n                _this.center();\n            } else if(_this.options.margin > 0) {\n                _this.enforceMargin();\n            }\n        },\n\n        toggle: function () {\n            this[this.visible ? 'hide' : 'show']();\n            return this;\n        },\n\n        unload: function () {\n            if (this.visible) {\n                this.hide();\n            }\n\n            jQuery(window).off('resize.MessiJS scroll.MessiJS', Messi.prototype.resize);\n\n            if (this.modal) {\n                this.modal.remove();\n            }\n\n            this.messi.remove();\n        },\n\n        // When the dialog is outside the viewport, move it back in.\n        // options.viewport is the center point of the dialog\n        enforceMargin: function () {\n            if (!this.options.margin) { return; }\n\n            var $window = jQuery(window);\n\n            // Backward compatibility hack - remove in version 2.1\n            var x = this.max(\n                parseInt(this.options.viewport.left, 10),\n                parseInt(this.options.position.left, 10)\n            );\n            var y = this.max(\n                parseInt(this.options.viewport.top, 10),\n                parseInt(this.options.position.top, 10)\n            );\n\n            // When the popup is too far on the right, move left\n            if (x + this.messi.width() + this.options.margin > $window.width()) {\n                x = $window.width() - this.options.margin - this.messi.width();\n            }\n\n            // When the popup is too far down, move up\n            if (y + this.messi.height() + this.options.margin > $window.height()) {\n                y = $window.height() - this.options.margin - this.messi.height();\n            }\n\n            // When the popup is too far to the left, move right\n            if (x < this.options.margin) {\n                x = this.options.margin;\n            }\n\n            // When the popup is too far up, move down\n            if (y < this.options.margin) {\n                y = this.options.margin;\n            }\n\n            this.messi.css({ left: x, top: y });\n        },\n\n        jqueryize: function() {\n            return this.messi;\n        },\n\n        max: function (a, b) {\n            if (a > b) { return a; }\n            else { return b; }\n        },\n\n    };\n\n    // Preserve backward compatibility\n    window.Messi = Messi;\n\n})();\n// vim: expandtab shiftwidth=4 tabstop=4 softtabstop=4:\n","jQuery.extend(Messi, {\n\n    alert: function (data, callback, options) {\n\n        var buttons = [{\n            id: 'ok',\n            label: 'OK',\n            val: 'OK'\n        }];\n\n        options = jQuery.extend(\n            { closeButton: false, buttons: buttons, callback: function () {} },\n            options,\n            { show: true, unload: true, callback: callback }\n        );\n\n        return new Messi(data, options);\n\n    },\n\n    ask: function (data, callback, options) {\n\n        var buttons = [\n            { id: 'yes', label: 'Yes', val: 'Y', 'class': 'btn-success' },\n            { id: 'no', label: 'No', val: 'N', 'class': 'btn-danger' }\n        ];\n\n        options = jQuery.extend(\n            { closeButton: false, modal: true, buttons: buttons, callback: function () {} },\n            options,\n            { show: true, unload: true, callback: callback }\n        );\n\n        return new Messi(data, options);\n\n    },\n\n    img: function (src, options) {\n\n        var img = new Image();\n\n        jQuery(img).load(function () {\n\n            var vp = {\n                width: jQuery(window).width() - 50,\n                height: jQuery(window).height() - 50\n            };\n            var ratio = (this.width > vp.width || this.height > vp.height) ?\n                Math.min(vp.width / this.width, vp.height / this.height) :\n                1;\n\n            jQuery(img)\n                .css({\n                    width: this.width * ratio,\n                    height: this.height * ratio\n                });\n\n            options = jQuery.extend(\n                {\n                    show:         true,\n                    unload:       true,\n                    closeButton:  true,\n                    width:        this.width * ratio,\n                    height:       this.height * ratio,\n                    padding:      0\n                },\n                options\n            );\n\n            new Messi(img, options);\n\n        })\n        .error(function () {\n\n            // Be IE friendly\n            if (typeof window.console === 'object') {\n                console.log('Error loading ' + src);\n            }\n\n        })\n        .attr('src', src);\n\n    },\n\n    load: function (url, options) {\n\n        options = jQuery.extend(\n            { show: true, unload: true, params: {} },\n            options\n        );\n\n        var request = {\n            url: url,\n            data: options.params,\n            dataType: 'html',\n            cache: false,\n            error: function (request, status, error) {\n                // Be IE friendly\n                if (typeof window.console === 'object') {\n                    console.log(request.responseText);\n                }\n            },\n            success: function (html) {\n                new Messi(html, options);\n            }\n        };\n\n        jQuery.ajax(request);\n\n    }\n\n});\n"]}